"use strict";"require form";"require uci";"require v2ray";return L.view.extend({load:function(){return Promise.all([v2ray.getSections("routing_rule"),v2ray.getSections("routing_balancer","tag")])},render:function(o){var t,a=void 0===o?[]:o,n=a[0],r=void 0===n?[]:n,e=a[1],u=void 0===e?[]:e,l=new form.Map("v2ray","%s - %s".format(_("V2Ray"),_("Routing")),_("Details: %s").format('<a href="https://www.v2ray.com/en/configuration/routing.html#routingobject" target="_blank">RoutingObject</a>')),i=l.section(form.NamedSection,"main_routing","routing");i.anonymous=!0,i.addremove=!1,t=i.option(form.Flag,"enabled",_("Enabled")),(t=i.option(form.ListValue,"domain_strategy",_("Domain resolution strategy"))).value(""),t.value("AsIs"),t.value("IPIfNonMatch"),t.value("IPOnDemand"),t=i.option(form.MultiValue,"rules",_("Rules"),_("Select routing rules to use"));for(var m=0,d=r;m<d.length;m++){var y=d[m];t.value(y.value,y.caption)}t=i.option(form.MultiValue,"balancers",_("Balancers"),_("Select routing balancers to use"));for(var c=0,s=u;c<s.length;c++){y=s[c];t.value(y.value,y.caption)}var v=l.section(form.GridSection,"routing_rule",_("Routing Rule"),_("Add routing rules here"));return v.anonymous=!0,v.addremove=!0,v.sortable=!0,(t=v.option(form.DummyValue,"_alias",_("Alias"))).modalonly=!1,t.cfgvalue=function(o){var t;return null!==(t=uci.get("v2ray",o,"alias"))&&void 0!==t?t:"?"},(t=v.option(form.DummyValue,"_type",_("Type"))).modalonly=!1,t.cfgvalue=function(o){var t;return null!==(t=uci.get("v2ray",o,"type"))&&void 0!==t?t:"?"},(t=v.option(form.DummyValue,"_inbound_tag",_("Inbound Tag"))).modalonly=!1,t.cfgvalue=function(o){var t=uci.get("v2ray",o,"inbound_tag");return L.toArray(t).join(" ")||"?"},(t=v.option(form.DummyValue,"_outbound_tag",_("Outbound Tag"))).modalonly=!1,t.cfgvalue=function(o){var t;return null!==(t=uci.get("v2ray",o,"outbound_tag"))&&void 0!==t?t:"?"},(t=v.option(form.DummyValue,"_network",_("Network"))).modalonly=!1,t.cfgvalue=function(o){var t;return null!==(t=uci.get("v2ray",o,"network"))&&void 0!==t?t:"?"},(t=v.option(form.Value,"alias",_("Alias"),_("Any custom string"))).modalonly=!0,t.rmempty=!1,(t=v.option(form.ListValue,"type",_("Type"))).modalonly=!0,t.value("field"),(t=v.option(form.DynamicList,"domain",_("Domain"))).modalonly=!0,(t=v.option(form.DynamicList,"ip",_("IP"))).modalonly=!0,(t=v.option(form.DynamicList,"port",_("Port"))).modalonly=!0,t.datatype="or(port, portrange)",(t=v.option(form.MultiValue,"network",_("Network"))).modalonly=!0,t.value("tcp"),t.value("udp"),(t=v.option(form.DynamicList,"source",_("Source"))).modalonly=!0,(t=v.option(form.DynamicList,"user",_("User"))).modalonly=!0,(t=v.option(form.DynamicList,"inbound_tag",_("Inbound tag"))).modalonly=!0,(t=v.option(form.MultiValue,"protocol",_("Protocol"))).modalonly=!0,t.value("http"),t.value("tls"),t.value("bittorrent"),(t=v.option(form.Value,"attrs",_("Attrs"))).modalonly=!0,(t=v.option(form.Value,"outbound_tag",_("Outbound tag"))).modalonly=!0,(t=v.option(form.Value,"balancer_tag",_("Balancer tag"))).modalonly=!0,t.depends("outbound_tag",""),l.render()}});